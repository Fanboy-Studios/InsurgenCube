// bot menus and tools

newmenu botmaps

alias afterdisconnect [
	if $connected [
		alias mapstartonce $arg1
		disconnect
	] [
		if (watchingdemo) [
			alias mapstartonce $arg1
			stopdemo
		] $arg1
	]
]

newmenu singleplayer

menuitem "Load Map"				[ showmenu Gamemode ]
menuitem "Bot Control"				[ showmenu "Bot control" ]

newmenu "Creating bot waypoints"

menuitem "Waypoints..."			[ showmenu "Waypoints" ]
menuitem "Paths..."			[ showmenu "Paths" ]
menuitem "Other operations..."		[ showmenu "Other bot operations" ]
menuitem "" -1
menuitem "Flood map with waypoints"	"wpflood"
menuitem "Save bot waypoints"		"wpsave"


newmenu Waypoints

menuitem "Add a waypoint"			"addwp 0"
menuitem "Add auto-connecting waypoint"		"addwp 1"
menuitem "" -1
menuitem "Delete nearest waypoint"		"delwp"
menuitem "Delete all waypoints"			[ showmenu "Delete all waypoints" ]


newmenu Paths

menuitem "Create Start of 2-way path"			"addpath2way1"
menuitem "Create End of 2-way path"			"addpath2way2"
menuitem "Delete Start of 2-way path"		"delpath2way1"
menuitem "Delete End of 2-way path"		"delpath2way2"
menuitem "" -1
menuitem "Create Start of 1-way path"			"addpath1way1"
menuitem "Create End of 1-way path"			"addpath1way2"
menuitem "Delete Start of 1-way path"		"delpath1way1" 
menuitem "Delete End of 1-way path"		"delpath1way2"


newmenu "Other bot operations"

menuitem "Set waypoint as jumpable"		"setjumpwp"
menuitem "Unset waypoint as jumpable"		"unsetjumpwp"
menuitem "Set waypoint direction (yaw)"		"setwpyaw"
menuitem "" -1
menuitemslider "Waypoint visibility: " 0 1 " " 1 ["Hide waypoints" "Show waypoints"] "wpvisible $arg1"
menuitemslider "Select/place waypoints by: " 0 1 "($xhairwpsel)" 1 ["Your current location" "Clicking a point on the grid"] "xhairwpsel $arg1"



newmenu "Delete all waypoints"
menuinit [ alias delallwps 0 ] // Ensures this menu works correctly.
menuitemcheckbox "Yes, delete all waypoints: " "alias delallwps 1" "alias delallwps $arg1" 
menuitem "2   	   [ Apply! ]" [ if $delallwps [ wpclear ] [ showmenu "" ] ] 
